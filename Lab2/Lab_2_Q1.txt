ORG 00H
LJMP MAIN
ORG 000BH
LJMP NOTEPLAY
ORG 001BH
LJMP DURATION

MAIN: MOV DPTR, #300H
MOV TMOD, #11H ;   T1 for 0.5 second and T0 for notes
MOV R7, #0BH
MOV R6, #0H
SETB TF1
SETB TF0
SETB PT1
MOV IE, #8AH ; INTERRUPTS ARE ENABLED
HERE: SJMP HERE


DURATION:
CLR TR1
DJNZ R7, NOTFINISHED
CJNE R6, #14, NOPROBLEM
MOV R6, #0
SJMP AGAIN
NOPROBLEM:
CLR TR0
INC R6; THEESE 2 INCREASE NEEDED TO UPDATE THE FREQUENCY LOCATION
INC R6
AGAIN:
MOV A, R6
MOVC A, @A+DPTR
MOV TH0, A
MOV A, R6
INC A
MOVC A, @A+DPTR
MOV TL0, A
SETB P1.0
SETB TR0
MOV R7, #10
NOTFINISHED: 
	MOV TH1,#HIGH(15536)
	MOV TL1,#LOW(15536)
	SETB TR1
RETI
NOTEPLAY:
CLR TR0
MOV A, R6
MOVC A, @A+DPTR
MOV TH0, A
MOV A, R6
INC A
MOVC A, @A+DPTR
MOV TL0, A
CPL P1.0
SETB TR0
RETI
ORG 300H
TABLE: DB 0FCH,44H, 0FCH, 0ACH, 0FDH, 0AH, 0FDH, 34H, 0FDH, 82H, 0FDH, 0C8H, 0FEH, 06H, 0FEH, 22H
END
